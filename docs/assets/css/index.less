#lbzui() {
  margin: 8px 16px 8px 0;
  margin-top: 16px;
  full-margin: 8px 0;
  drawer-width: 256px;
  app-width: 360px;
  app-height: 640px;
  square-width: (360px - 4 * 16px) / 2;
  mini-square-width: 64px;
}

html,
body {
  width: 100%;
  height: 100%;
}

html {
  body {
    background-color: #fafafa;
    overscroll-behavior: none;
  }

  &[data-lbz-theme="dark"] body {
    background-color: #303030;
  }
}

.lbzui {
  &-app,
  &-rectangle,
  &-square,
  &-mini-square,
  &-mini-rectangle {
    overflow: hidden;
    position: relative;
    box-sizing: border-box;
    border: 1px solid var(--lbz-theme-outline-on-surface);
    border-radius: 4px;
    .lbz-surface(0);
    transition: box-shadow 150ms linear;

    &:hover {
      box-shadow: 0 0 8px 0 rgba(0, 0, 0, .08), 0 0 15px 0 rgba(0, 0, 0, .02), 0 0 20px 4px rgba(0, 0, 0, .06);
    }

    // darkened
    html[data-lbz-theme="dark"] &.lbzui-is-darkened {
      .lbz-surface("dark"; 0) !important;
    }
  }

  &-app,
  &-rectangle {
    display: inline-block;
    margin: #lbzui[margin] !important;
    width: 100%;
    max-width: #lbzui[app-width];
    vertical-align: top;
  }

  &-app {
    height: #lbzui[app-height];
  }

  &-square,
  &-mini-square,
  &-mini-rectangle {
    display: inline-flex;
    flex-flow: row wrap;
    justify-content: center;
    align-items: center;
    margin: #lbzui[margin];
    vertical-align: top;
  }

  &-square {
    width: #lbzui[square-width];
    height: #lbzui[square-width];
  }

  &-mini-square {
    width: #lbzui[mini-square-width];
    height: #lbzui[mini-square-width];
  }

  &-mini-rectangle {
    width: 100%;
    max-width: #lbzui[app-width];
    height: #lbzui[mini-square-width];
  }

  &-background {
    &--primary {
      background-color: var(--lbz-theme-primary);
    }

    &--secondary {
      background-color: var(--lbz-theme-secondary);
    }

    &--error {
      background-color: var(--lbz-theme-error);
    }

    &--light {
      .lbz-surface("light"; 0);
    }

    &--dark {
      .lbz-surface("dark"; 0);
    }
  }

  &-color-background {
    &--primary {
      color: var(--lbz-theme-on-primary);
      background-color: var(--lbz-theme-primary);
    }

    &--primary-variant {
      color: var(--lbz-theme-on-primary-variant);
      background-color: var(--lbz-theme-primary-variant);
    }

    &--secondary {
      color: var(--lbz-theme-on-secondary);
      background-color: var(--lbz-theme-secondary);
    }

    &--secondary-variant {
      color: var(--lbz-theme-on-secondary-variant);
      background-color: var(--lbz-theme-secondary-variant);
    }

    &--background {
      color: var(--lbz-theme-on-background);
      background-color: var(--lbz-theme-background);
    }

    &--surface {
      color: var(--lbz-theme-on-surface);
      background-color: var(--lbz-theme-surface);
    }

    &--error {
      color: var(--lbz-theme-on-error);
      background-color: var(--lbz-theme-error);
    }

    &--light {
      color: var(--lbz-theme-on-light);
      .lbz-surface("light"; 0);
    }

    &--dark {
      color: var(--lbz-theme-on-dark);
      .lbz-surface("dark"; 0);
    }
  }

  width: 100%;
  height: 100%;
  .lbz-typography("body1");
  color: var(--lbz-theme-text-medium-emphasis-on-surface);

  & &__drawer {
    position: fixed;
    width: #lbzui[drawer-width];

    .lbz-drawer {
      &__container {
        width: inherit;

        > :last-child {
          padding-bottom: #lbzui[margin-top];
        }
      }

      // title
      &__title {
        cursor: pointer;
      }

      &__content {
        overflow: auto;
      }

      &__footer .lbz-list {
        padding: 16px 0 0;
      }
    }
  }

  &__main {
    display: flex;
    flex-flow: column nowrap;
    justify-content: stretch;
    align-items: stretch;
    margin-left: #lbzui[drawer-width];
    min-height: 100%;

    &__container {
      flex: 1;
      margin: var(--lbz-layout-grid-margin);

      // transition
      &-enter-active {
        transition: all 235ms linear 100ms;
      }

      &-enter {
        opacity: 0;
        transform: translate3d(0, 16px, 0);
      }
    }

    .lbz-typography--h4,
    .lbz-typography--h5 {
      color: var(--lbz-theme-text-high-emphasis-on-surface);
    }
  }

  & &__fab {
    display: none;
    position: fixed;
    right: 0;
    bottom: 0;
    margin: var(--lbz-layout-grid-margin);

    html[data-lbz-theme="dark"] & {
      color: #lbz-theme.dark[on-primary];
      background-color: #lbz-theme.dark[primary];
    }
  }

  // Home, Customization
  &-home,
  &-customization {
    a:hover {
      text-decoration: underline;
    }

    .lbz-icon {
      width: 16px;
      height: 16px;
      font-size: 16px;
      color: var(--lbz-theme-outline-on-surface);
    }
  }

  &-home {
    h2 span {
      display: block;
      margin-top: 6px;
      color: var(--lbz-theme-text-medium-emphasis-on-surface);
    }

    .lbz-typography--body2 a {
      display: inline-block;
      margin: 0 4px 4px 0;

      img {
        display: block;
      }
    }

    strong {
      font-weight: 500;
    }
  }

  // Components
  &-components {
    &-button {
      .lbz-button {
        margin: #lbzui[margin] !important;
      }

      .lbzui-mini-rectangle .lbz-button {
        margin: 8px !important;
      }
    }

    &-card .lbz-card {
      margin: #lbzui[margin];
      width: 100%;
      max-width: #lbzui[app-width];
    }

    &-drawer {
      .lbz-button {
        display: flex;
        margin: #lbzui[full-margin];
      }

      .lbz-drawer {
        position: relative !important;
        z-index: 4 !important;
      }
    }

    &-fab {
      .lbz-button,
      .lbz-fab {
        margin: #lbzui[margin];
      }
    }

    &-icon-button,
    &-state {
      html[data-lbz-theme="dark"] & .lbzui-is-darkened {
        color: var(--lbz-theme-on-dark);
      }
    }

    &-snackbar .lbz-button {
      display: flex;

      + .lbz-button {
        margin-top: #lbzui[margin-top];
        margin-left: 0;
      }
    }

    &-state .lbzui-square {
      user-select: none;
    }

    &-tab .lbz-tab {
      margin: #lbzui[margin];
      width: 100%;
      max-width: #lbzui[app-width];

      + .lbz-tab {
        margin-top: #lbzui[margin-top];
      }

      // on-background
      &:not(.lbz-tab--on-primary):not(.lbz-tab--on-secondary):not(.lbz-tab--on-light):not(.lbz-tab--on-dark) {
        .lbz-surface(0);
      }

      html[data-lbz-theme="dark"] & {
        .lbz-surface("dark"; 0) !important;
      }
    }

    &-top-app-bar {
      .lbz-top-app-bar {
        margin: #lbzui[margin];

        // type
        &:not(.lbz-top-app-bar--short) {
          width: 100%;
          max-width: #lbzui[app-width];

          + .lbz-top-app-bar {
            margin-top: #lbzui[margin-top];
          }
        }
      }

      .lbzui-rectangle {
        display: block;
        max-height: 114px;

        .lbz-top-app-bar {
          margin: 0;
        }
      }
    }
  }

  // Utilities
  &-utilities {
    &-aspect-ratio .lbzui-rectangle {
      width: #lbzui[square-width];
    }

    &-layout-grid .lbz-layout-grid {
      max-width: 100%;

      &__cell {
        overflow: hidden;
        height: #lbzui[square-width];
        background-color: var(--lbz-theme-outline-on-surface);
      }

      .lbzui-layout-grid__cell {
        height: #lbzui[square-width] / ( 4 / 3);
      }

      + .lbz-layout-grid {
        margin-top: #lbzui[margin-top] !important;
      }
    }

    &-typography {
      h4,
      h5 {
        color: inherit !important;
      }
    }
  }

  @media #lbz-layout-grid.breakpoint[mobile] {
    & &__drawer {
      width: 100%;
    }

    &__main {
      margin-left: 0;

      &__container {
        margin-bottom: calc(2 * var(--lbz-layout-grid-margin) + 56px);
      }
    }

    & &__fab {
      display: inline-flex;
    }
  }
}

@media #lbz-layout-grid.breakpoint[mobile] {
  body .lbz-snackbar {
    margin-bottom: calc(var(--lbz-layout-grid-margin) + 64px);
  }
}
